# SimBoard Backend Configuration
# Copy this file to `.env` and adjust values as needed.
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# General Application Configuration
# -------------------------------------------------------------------
# "development" | "production"
ENV=development
# Duplicate for frameworks expecting ENVIRONMENT
ENVIRONMENT=${ENV}
# FastAPI server port
PORT=8000
# Domain used by Traefik and backend CORS settings
DOMAIN=localhost
# Stack name for Traefik routing (should match docker-compose.yml)
STACK_NAME=earthframe

# -------------------------------------------------------------------
# Frontend Configuration
# -------------------------------------------------------------------
# Origin for CORS requests
FRONTEND_ORIGIN=http://localhost:5173
# Optional: in production, set this to your deployed frontend
# FRONTEND_ORIGIN=https://app.${DOMAIN}

# -------------------------------------------------------------------
# Database Configuration
# -------------------------------------------------------------------
# Postgres credentials (used by both backend and db service)
POSTGRES_USER=earthframe
POSTGRES_PASSWORD=earthframe
POSTGRES_DB=earthframe
POSTGRES_PORT=5432
POSTGRES_SERVER=db
PGDATA=/var/lib/postgresql/data/pgdata

# Local dev connection (Postgres on host)
DATABASE_URL=postgresql+psycopg://earthframe:earthframe@localhost:5432/earthframe
# Docker Compose connection (Postgres service = "db")
# DATABASE_URL=postgresql+psycopg://earthframe:earthframe@db:5432/earthframe

# Test Database
TEST_DATABASE_URL=postgresql+psycopg://earthframe:earthframe@localhost:5432/earthframe_test
# TEST_DATABASE_URL=postgresql+psycopg://earthframe:earthframe@db:5432/earthframe_test

# -------------------------------------------------------------------
# GitHub OAuth Configuration
# -------------------------------------------------------------------
# These come from your GitHub OAuth App (GitHub → Settings → Developer settings → OAuth Apps)
GITHUB_CLIENT_ID=your_github_oauth_app_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_app_client_secret

# Must match the callback URL in your GitHub App configuration
# In development, this points to your backend running on localhost
GITHUB_REDIRECT_URL=http://localhost:8000/auth/github/callback
# In production, use the frontend domain (e.g. https://app.${DOMAIN}/auth/callback)
# GITHUB_REDIRECT_URL=https://app.${DOMAIN}/auth/callback

# Secret used to sign OAuth "state" parameter (prevents CSRF)
# Generate securely with:
#   python -c "import secrets; print(secrets.token_urlsafe(64))"
GITHUB_STATE_SECRET_KEY=superlongrandomsecretforoauthstate

# -------------------------------------------------------------------
# Cookie Configuration (for session storage)
# -------------------------------------------------------------------
COOKIE_NAME=simscope_auth
COOKIE_SECURE=true        # True in production (HTTPS)
COOKIE_HTTPONLY=true      # Prevent JavaScript access
COOKIE_SAMESITE=lax       # "none" if cross-site, "strict" or "lax" otherwise
COOKIE_MAX_AGE=3600       # Seconds
